#include "../inc/apelib.h"

int main(int argc, char *argv[])
{
	IMG	in, out;
	int	i, j, k;

	ReadImage(&in, argv[1]);

	out.row = in.row;
	out.col = in.col;
	out.bas = in.bas;
	out.type = in.type;
	MemImage(&out);
	
	for(k=0; k<out.bas; k++){
		for(i=0; i<out.row; i++){
			for(j=0; j<out.col; j++){
				if(in.data[k][i][j] == 0.0) out.data[k][i][j] = 255.0;
				if(in.data[k][i][j] == 1.0) out.data[k][i][j] = 254.0;
				if(in.data[k][i][j] == 2.0) out.data[k][i][j] = 253.0;
				if(in.data[k][i][j] == 3.0) out.data[k][i][j] = 252.0;
				if(in.data[k][i][j] == 4.0) out.data[k][i][j] = 251.0;
				if(in.data[k][i][j] == 5.0) out.data[k][i][j] = 250.0;
				if(in.data[k][i][j] == 6.0) out.data[k][i][j] = 249.0;
				if(in.data[k][i][j] == 7.0) out.data[k][i][j] = 248.0;
				if(in.data[k][i][j] == 8.0) out.data[k][i][j] = 247.0;
				if(in.data[k][i][j] == 9.0) out.data[k][i][j] = 246.0;
				if(in.data[k][i][j] == 10.0) out.data[k][i][j] = 245.0;
				if(in.data[k][i][j] == 11.0) out.data[k][i][j] = 244.0;
				if(in.data[k][i][j] == 12.0) out.data[k][i][j] = 243.0;
				if(in.data[k][i][j] == 13.0) out.data[k][i][j] = 242.0;
				if(in.data[k][i][j] == 14.0) out.data[k][i][j] = 241.0;
				if(in.data[k][i][j] == 15.0) out.data[k][i][j] = 240.0;
				if(in.data[k][i][j] == 16.0) out.data[k][i][j] = 239.0;
				if(in.data[k][i][j] == 17.0) out.data[k][i][j] = 238.0;
				if(in.data[k][i][j] == 18.0) out.data[k][i][j] = 237.0;
				if(in.data[k][i][j] == 19.0) out.data[k][i][j] = 236.0;
				if(in.data[k][i][j] == 20.0) out.data[k][i][j] = 235.0;
				if(in.data[k][i][j] == 21.0) out.data[k][i][j] = 234.0;
				if(in.data[k][i][j] == 22.0) out.data[k][i][j] = 233.0;
				if(in.data[k][i][j] == 23.0) out.data[k][i][j] = 232.0;
				if(in.data[k][i][j] == 24.0) out.data[k][i][j] = 231.0;
				if(in.data[k][i][j] == 25.0) out.data[k][i][j] = 230.0;
				if(in.data[k][i][j] == 26.0) out.data[k][i][j] = 229.0;
				if(in.data[k][i][j] == 27.0) out.data[k][i][j] = 228.0;
				if(in.data[k][i][j] == 28.0) out.data[k][i][j] = 227.0;
				if(in.data[k][i][j] == 29.0) out.data[k][i][j] = 226.0;
				if(in.data[k][i][j] == 30.0) out.data[k][i][j] = 225.0;
				if(in.data[k][i][j] == 31.0) out.data[k][i][j] = 224.0;
				if(in.data[k][i][j] == 32.0) out.data[k][i][j] = 223.0;
				if(in.data[k][i][j] == 33.0) out.data[k][i][j] = 222.0;
				if(in.data[k][i][j] == 34.0) out.data[k][i][j] = 221.0;
				if(in.data[k][i][j] == 35.0) out.data[k][i][j] = 220.0;
				if(in.data[k][i][j] == 36.0) out.data[k][i][j] = 219.0;
				if(in.data[k][i][j] == 37.0) out.data[k][i][j] = 218.0;
				if(in.data[k][i][j] == 38.0) out.data[k][i][j] = 217.0;
				if(in.data[k][i][j] == 39.0) out.data[k][i][j] = 216.0;
				if(in.data[k][i][j] == 40.0) out.data[k][i][j] = 215.0;
				if(in.data[k][i][j] == 41.0) out.data[k][i][j] = 214.0;
				if(in.data[k][i][j] == 42.0) out.data[k][i][j] = 213.0;
				if(in.data[k][i][j] == 43.0) out.data[k][i][j] = 212.0;
				if(in.data[k][i][j] == 44.0) out.data[k][i][j] = 211.0;
				if(in.data[k][i][j] == 45.0) out.data[k][i][j] = 210.0;
				if(in.data[k][i][j] == 46.0) out.data[k][i][j] = 209.0;
				if(in.data[k][i][j] == 47.0) out.data[k][i][j] = 208.0;
				if(in.data[k][i][j] == 48.0) out.data[k][i][j] = 207.0;
				if(in.data[k][i][j] == 49.0) out.data[k][i][j] = 206.0;
				if(in.data[k][i][j] == 50.0) out.data[k][i][j] = 205.0;
				if(in.data[k][i][j] == 51.0) out.data[k][i][j] = 204.0;
				if(in.data[k][i][j] == 52.0) out.data[k][i][j] = 203.0;
				if(in.data[k][i][j] == 53.0) out.data[k][i][j] = 202.0;
				if(in.data[k][i][j] == 54.0) out.data[k][i][j] = 201.0;
				if(in.data[k][i][j] == 55.0) out.data[k][i][j] = 200.0;
				if(in.data[k][i][j] == 56.0) out.data[k][i][j] = 199.0;
				if(in.data[k][i][j] == 57.0) out.data[k][i][j] = 198.0;
				if(in.data[k][i][j] == 58.0) out.data[k][i][j] = 197.0;
				if(in.data[k][i][j] == 59.0) out.data[k][i][j] = 196.0;
				if(in.data[k][i][j] == 60.0) out.data[k][i][j] = 195.0;
				if(in.data[k][i][j] == 61.0) out.data[k][i][j] = 194.0;
				if(in.data[k][i][j] == 62.0) out.data[k][i][j] = 193.0;
				if(in.data[k][i][j] == 63.0) out.data[k][i][j] = 192.0;
				if(in.data[k][i][j] == 64.0) out.data[k][i][j] = 191.0;
				if(in.data[k][i][j] == 65.0) out.data[k][i][j] = 190.0;
				if(in.data[k][i][j] == 66.0) out.data[k][i][j] = 189.0;
				if(in.data[k][i][j] == 67.0) out.data[k][i][j] = 188.0;
				if(in.data[k][i][j] == 68.0) out.data[k][i][j] = 187.0;
				if(in.data[k][i][j] == 69.0) out.data[k][i][j] = 186.0;
				if(in.data[k][i][j] == 70.0) out.data[k][i][j] = 185.0;
				if(in.data[k][i][j] == 71.0) out.data[k][i][j] = 184.0;
				if(in.data[k][i][j] == 72.0) out.data[k][i][j] = 183.0;
				if(in.data[k][i][j] == 73.0) out.data[k][i][j] = 182.0;
				if(in.data[k][i][j] == 74.0) out.data[k][i][j] = 181.0;
				if(in.data[k][i][j] == 75.0) out.data[k][i][j] = 180.0;
				if(in.data[k][i][j] == 76.0) out.data[k][i][j] = 179.0;
				if(in.data[k][i][j] == 77.0) out.data[k][i][j] = 178.0;
				if(in.data[k][i][j] == 78.0) out.data[k][i][j] = 177.0;
				if(in.data[k][i][j] == 79.0) out.data[k][i][j] = 176.0;
				if(in.data[k][i][j] == 80.0) out.data[k][i][j] = 175.0;
				if(in.data[k][i][j] == 81.0) out.data[k][i][j] = 174.0;
				if(in.data[k][i][j] == 82.0) out.data[k][i][j] = 173.0;
				if(in.data[k][i][j] == 83.0) out.data[k][i][j] = 172.0;
				if(in.data[k][i][j] == 84.0) out.data[k][i][j] = 171.0;
				if(in.data[k][i][j] == 85.0) out.data[k][i][j] = 170.0;
				if(in.data[k][i][j] == 86.0) out.data[k][i][j] = 169.0;
				if(in.data[k][i][j] == 87.0) out.data[k][i][j] = 168.0;
				if(in.data[k][i][j] == 88.0) out.data[k][i][j] = 167.0;
				if(in.data[k][i][j] == 89.0) out.data[k][i][j] = 166.0;
				if(in.data[k][i][j] == 90.0) out.data[k][i][j] = 165.0;
				if(in.data[k][i][j] == 91.0) out.data[k][i][j] = 164.0;
				if(in.data[k][i][j] == 92.0) out.data[k][i][j] = 163.0;
				if(in.data[k][i][j] == 93.0) out.data[k][i][j] = 162.0;
				if(in.data[k][i][j] == 94.0) out.data[k][i][j] = 161.0;
				if(in.data[k][i][j] == 95.0) out.data[k][i][j] = 160.0;
				if(in.data[k][i][j] == 96.0) out.data[k][i][j] = 159.0;
				if(in.data[k][i][j] == 97.0) out.data[k][i][j] = 158.0;
				if(in.data[k][i][j] == 98.0) out.data[k][i][j] = 157.0;
				if(in.data[k][i][j] == 99.0) out.data[k][i][j] = 156.0;
				if(in.data[k][i][j] == 100.0) out.data[k][i][j] = 155.0;
				if(in.data[k][i][j] == 101.0) out.data[k][i][j] = 154.0;
				if(in.data[k][i][j] == 102.0) out.data[k][i][j] = 153.0;
				if(in.data[k][i][j] == 103.0) out.data[k][i][j] = 152.0;
				if(in.data[k][i][j] == 104.0) out.data[k][i][j] = 151.0;
				if(in.data[k][i][j] == 105.0) out.data[k][i][j] = 150.0;
				if(in.data[k][i][j] == 106.0) out.data[k][i][j] = 149.0;
				if(in.data[k][i][j] == 107.0) out.data[k][i][j] = 148.0;
				if(in.data[k][i][j] == 108.0) out.data[k][i][j] = 147.0;
				if(in.data[k][i][j] == 109.0) out.data[k][i][j] = 146.0;
				if(in.data[k][i][j] == 110.0) out.data[k][i][j] = 145.0;
				if(in.data[k][i][j] == 111.0) out.data[k][i][j] = 144.0;
				if(in.data[k][i][j] == 112.0) out.data[k][i][j] = 143.0;
				if(in.data[k][i][j] == 113.0) out.data[k][i][j] = 142.0;
				if(in.data[k][i][j] == 114.0) out.data[k][i][j] = 141.0;
				if(in.data[k][i][j] == 115.0) out.data[k][i][j] = 140.0;
				if(in.data[k][i][j] == 116.0) out.data[k][i][j] = 139.0;
				if(in.data[k][i][j] == 117.0) out.data[k][i][j] = 138.0;
				if(in.data[k][i][j] == 118.0) out.data[k][i][j] = 137.0;
				if(in.data[k][i][j] == 119.0) out.data[k][i][j] = 136.0;
				if(in.data[k][i][j] == 120.0) out.data[k][i][j] = 135.0;
				if(in.data[k][i][j] == 121.0) out.data[k][i][j] = 134.0;
				if(in.data[k][i][j] == 122.0) out.data[k][i][j] = 133.0;
				if(in.data[k][i][j] == 123.0) out.data[k][i][j] = 132.0;
				if(in.data[k][i][j] == 124.0) out.data[k][i][j] = 131.0;
				if(in.data[k][i][j] == 125.0) out.data[k][i][j] = 130.0;
				if(in.data[k][i][j] == 126.0) out.data[k][i][j] = 129.0;
				if(in.data[k][i][j] == 127.0) out.data[k][i][j] = 128.0;
				if(in.data[k][i][j] == 128.0) out.data[k][i][j] = 127.0;
				if(in.data[k][i][j] == 129.0) out.data[k][i][j] = 126.0;
				if(in.data[k][i][j] == 130.0) out.data[k][i][j] = 125.0;
				if(in.data[k][i][j] == 131.0) out.data[k][i][j] = 124.0;
				if(in.data[k][i][j] == 132.0) out.data[k][i][j] = 123.0;
				if(in.data[k][i][j] == 133.0) out.data[k][i][j] = 122.0;
				if(in.data[k][i][j] == 134.0) out.data[k][i][j] = 121.0;
				if(in.data[k][i][j] == 135.0) out.data[k][i][j] = 120.0;
				if(in.data[k][i][j] == 136.0) out.data[k][i][j] = 119.0;
				if(in.data[k][i][j] == 137.0) out.data[k][i][j] = 118.0;
				if(in.data[k][i][j] == 138.0) out.data[k][i][j] = 117.0;
				if(in.data[k][i][j] == 139.0) out.data[k][i][j] = 116.0;
				if(in.data[k][i][j] == 140.0) out.data[k][i][j] = 115.0;
				if(in.data[k][i][j] == 141.0) out.data[k][i][j] = 114.0;
				if(in.data[k][i][j] == 142.0) out.data[k][i][j] = 113.0;
				if(in.data[k][i][j] == 143.0) out.data[k][i][j] = 112.0;
				if(in.data[k][i][j] == 144.0) out.data[k][i][j] = 111.0;
				if(in.data[k][i][j] == 145.0) out.data[k][i][j] = 110.0;
				if(in.data[k][i][j] == 146.0) out.data[k][i][j] = 109.0;
				if(in.data[k][i][j] == 147.0) out.data[k][i][j] = 108.0;
				if(in.data[k][i][j] == 148.0) out.data[k][i][j] = 107.0;
				if(in.data[k][i][j] == 149.0) out.data[k][i][j] = 106.0;
				if(in.data[k][i][j] == 150.0) out.data[k][i][j] = 105.0;
				if(in.data[k][i][j] == 151.0) out.data[k][i][j] = 104.0;
				if(in.data[k][i][j] == 152.0) out.data[k][i][j] = 103.0;
				if(in.data[k][i][j] == 153.0) out.data[k][i][j] = 102.0;
				if(in.data[k][i][j] == 154.0) out.data[k][i][j] = 101.0;
				if(in.data[k][i][j] == 155.0) out.data[k][i][j] = 100.0;
				if(in.data[k][i][j] == 156.0) out.data[k][i][j] = 99.0;
				if(in.data[k][i][j] == 157.0) out.data[k][i][j] = 98.0;
				if(in.data[k][i][j] == 158.0) out.data[k][i][j] = 97.0;
				if(in.data[k][i][j] == 159.0) out.data[k][i][j] = 96.0;
				if(in.data[k][i][j] == 160.0) out.data[k][i][j] = 95.0;
				if(in.data[k][i][j] == 161.0) out.data[k][i][j] = 94.0;
				if(in.data[k][i][j] == 162.0) out.data[k][i][j] = 93.0;
				if(in.data[k][i][j] == 163.0) out.data[k][i][j] = 92.0;
				if(in.data[k][i][j] == 164.0) out.data[k][i][j] = 91.0;
				if(in.data[k][i][j] == 165.0) out.data[k][i][j] = 90.0;
				if(in.data[k][i][j] == 166.0) out.data[k][i][j] = 89.0;
				if(in.data[k][i][j] == 167.0) out.data[k][i][j] = 88.0;
				if(in.data[k][i][j] == 168.0) out.data[k][i][j] = 87.0;
				if(in.data[k][i][j] == 169.0) out.data[k][i][j] = 86.0;
				if(in.data[k][i][j] == 170.0) out.data[k][i][j] = 85.0;
				if(in.data[k][i][j] == 171.0) out.data[k][i][j] = 84.0;
				if(in.data[k][i][j] == 172.0) out.data[k][i][j] = 83.0;
				if(in.data[k][i][j] == 173.0) out.data[k][i][j] = 82.0;
				if(in.data[k][i][j] == 174.0) out.data[k][i][j] = 81.0;
				if(in.data[k][i][j] == 175.0) out.data[k][i][j] = 80.0;
				if(in.data[k][i][j] == 176.0) out.data[k][i][j] = 79.0;
				if(in.data[k][i][j] == 177.0) out.data[k][i][j] = 78.0;
				if(in.data[k][i][j] == 178.0) out.data[k][i][j] = 77.0;
				if(in.data[k][i][j] == 179.0) out.data[k][i][j] = 76.0;
				if(in.data[k][i][j] == 180.0) out.data[k][i][j] = 75.0;
				if(in.data[k][i][j] == 181.0) out.data[k][i][j] = 74.0;
				if(in.data[k][i][j] == 182.0) out.data[k][i][j] = 73.0;
				if(in.data[k][i][j] == 183.0) out.data[k][i][j] = 72.0;
				if(in.data[k][i][j] == 184.0) out.data[k][i][j] = 71.0;
				if(in.data[k][i][j] == 185.0) out.data[k][i][j] = 70.0;
				if(in.data[k][i][j] == 186.0) out.data[k][i][j] = 69.0;
				if(in.data[k][i][j] == 187.0) out.data[k][i][j] = 68.0;
				if(in.data[k][i][j] == 188.0) out.data[k][i][j] = 67.0;
				if(in.data[k][i][j] == 189.0) out.data[k][i][j] = 66.0;
				if(in.data[k][i][j] == 190.0) out.data[k][i][j] = 65.0;
				if(in.data[k][i][j] == 191.0) out.data[k][i][j] = 64.0;
				if(in.data[k][i][j] == 192.0) out.data[k][i][j] = 63.0;
				if(in.data[k][i][j] == 193.0) out.data[k][i][j] = 62.0;
				if(in.data[k][i][j] == 194.0) out.data[k][i][j] = 61.0;
				if(in.data[k][i][j] == 195.0) out.data[k][i][j] = 60.0;
				if(in.data[k][i][j] == 196.0) out.data[k][i][j] = 59.0;
				if(in.data[k][i][j] == 197.0) out.data[k][i][j] = 58.0;
				if(in.data[k][i][j] == 198.0) out.data[k][i][j] = 57.0;
				if(in.data[k][i][j] == 199.0) out.data[k][i][j] = 56.0;
				if(in.data[k][i][j] == 200.0) out.data[k][i][j] = 55.0;
				if(in.data[k][i][j] == 201.0) out.data[k][i][j] = 54.0;
				if(in.data[k][i][j] == 202.0) out.data[k][i][j] = 53.0;
				if(in.data[k][i][j] == 203.0) out.data[k][i][j] = 52.0;
				if(in.data[k][i][j] == 204.0) out.data[k][i][j] = 51.0;
				if(in.data[k][i][j] == 205.0) out.data[k][i][j] = 50.0;
				if(in.data[k][i][j] == 206.0) out.data[k][i][j] = 49.0;
				if(in.data[k][i][j] == 207.0) out.data[k][i][j] = 48.0;
				if(in.data[k][i][j] == 208.0) out.data[k][i][j] = 47.0;
				if(in.data[k][i][j] == 209.0) out.data[k][i][j] = 46.0;
				if(in.data[k][i][j] == 210.0) out.data[k][i][j] = 45.0;
				if(in.data[k][i][j] == 211.0) out.data[k][i][j] = 44.0;
				if(in.data[k][i][j] == 212.0) out.data[k][i][j] = 43.0;
				if(in.data[k][i][j] == 213.0) out.data[k][i][j] = 42.0;
				if(in.data[k][i][j] == 214.0) out.data[k][i][j] = 41.0;
				if(in.data[k][i][j] == 215.0) out.data[k][i][j] = 40.0;
				if(in.data[k][i][j] == 216.0) out.data[k][i][j] = 39.0;
				if(in.data[k][i][j] == 217.0) out.data[k][i][j] = 38.0;
				if(in.data[k][i][j] == 218.0) out.data[k][i][j] = 37.0;
				if(in.data[k][i][j] == 219.0) out.data[k][i][j] = 36.0;
				if(in.data[k][i][j] == 220.0) out.data[k][i][j] = 35.0;
				if(in.data[k][i][j] == 221.0) out.data[k][i][j] = 34.0;
				if(in.data[k][i][j] == 222.0) out.data[k][i][j] = 33.0;
				if(in.data[k][i][j] == 223.0) out.data[k][i][j] = 32.0;
				if(in.data[k][i][j] == 224.0) out.data[k][i][j] = 31.0;
				if(in.data[k][i][j] == 225.0) out.data[k][i][j] = 30.0;
				if(in.data[k][i][j] == 226.0) out.data[k][i][j] = 29.0;
				if(in.data[k][i][j] == 227.0) out.data[k][i][j] = 28.0;
				if(in.data[k][i][j] == 228.0) out.data[k][i][j] = 27.0;
				if(in.data[k][i][j] == 229.0) out.data[k][i][j] = 26.0;
				if(in.data[k][i][j] == 230.0) out.data[k][i][j] = 25.0;
				if(in.data[k][i][j] == 231.0) out.data[k][i][j] = 24.0;
				if(in.data[k][i][j] == 232.0) out.data[k][i][j] = 23.0;
				if(in.data[k][i][j] == 233.0) out.data[k][i][j] = 22.0;
				if(in.data[k][i][j] == 234.0) out.data[k][i][j] = 21.0;
				if(in.data[k][i][j] == 235.0) out.data[k][i][j] = 20.0;
				if(in.data[k][i][j] == 236.0) out.data[k][i][j] = 19.0;
				if(in.data[k][i][j] == 237.0) out.data[k][i][j] = 18.0;
				if(in.data[k][i][j] == 238.0) out.data[k][i][j] = 17.0;
				if(in.data[k][i][j] == 239.0) out.data[k][i][j] = 16.0;
				if(in.data[k][i][j] == 240.0) out.data[k][i][j] = 15.0;
				if(in.data[k][i][j] == 241.0) out.data[k][i][j] = 14.0;
				if(in.data[k][i][j] == 242.0) out.data[k][i][j] = 13.0;
				if(in.data[k][i][j] == 243.0) out.data[k][i][j] = 12.0;
				if(in.data[k][i][j] == 244.0) out.data[k][i][j] = 11.0;
				if(in.data[k][i][j] == 245.0) out.data[k][i][j] = 10.0;
				if(in.data[k][i][j] == 246.0) out.data[k][i][j] = 9.0;
				if(in.data[k][i][j] == 247.0) out.data[k][i][j] = 8.0;
				if(in.data[k][i][j] == 248.0) out.data[k][i][j] = 7.0;
				if(in.data[k][i][j] == 249.0) out.data[k][i][j] = 6.0;
				if(in.data[k][i][j] == 250.0) out.data[k][i][j] = 5.0;
				if(in.data[k][i][j] == 251.0) out.data[k][i][j] = 4.0;
				if(in.data[k][i][j] == 252.0) out.data[k][i][j] = 3.0;
				if(in.data[k][i][j] == 253.0) out.data[k][i][j] = 2.0;
				if(in.data[k][i][j] == 254.0) out.data[k][i][j] = 1.0;
				if(in.data[k][i][j] == 255.0) out.data[k][i][j] = 0.0;
			}
		}
	}

	WriteImage(&out, argv[2]);

	return 0;
}